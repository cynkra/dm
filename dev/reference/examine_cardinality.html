<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Check table relations — examine_cardinality • dm</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Check table relations — examine_cardinality" />
<meta property="og:description" content="All check_cardinality_?_?() functions test the following conditions:
Is pk_column is a unique key for parent_table?
Is the set of values in fk_column of child_table a subset of the set of values of pk_column?
Does the relation between the two tables of the data model meet the cardinality requirements?


examine_cardinality() also checks the first two points and subsequently determines the type of cardinality." />
<meta property="og:image" content="https://cynkra.github.io/dm/logo.png" />


<meta name="robots" content="noindex">



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dm</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.2.3.9006</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/dm.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/howto-dm-theory.html">Introduction to relational data models</a>
    </li>
    <li>
      <a href="../articles/howto-dm-df.html">Create a dm object from data frames</a>
    </li>
    <li>
      <a href="../articles/howto-dm-db.html">Create a dm object from a database</a>
    </li>
    <li>
      <a href="../articles/howto-dm-copy.html">Copy data to and from a database</a>
    </li>
    <li>
      <a href="../articles/howto-dm-rows.html">Insert, update or remove rows in a database</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Technical articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tech-dm-join.html">Joining in relational data models</a>
    </li>
    <li>
      <a href="../articles/tech-dm-zoom.html">Zooming and manipulating tables</a>
    </li>
    <li>
      <a href="../articles/tech-dm-filter.html">Filtering in relational data models</a>
    </li>
    <li>
      <a href="../articles/tech-dm-draw.html">Visualizing dm objects</a>
    </li>
    <li>
      <a href="../articles/tech-dm-low-level.html">Model verification - keys, constraints and normalization</a>
    </li>
    <li>
      <a href="../articles/tech-dm-class.html">Class 'dm' and basic operations</a>
    </li>
    <li>
      <a href="../articles/tech-dm-naming.html">Function naming logic</a>
    </li>
    <li>
      <a href="../articles/tech-dm-cdm.html">Migration guide: 'cdm' -&gt; 'dm'</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cynkra/dm">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check table relations</h1>
    <small class="dont-index">Source: <a href='https://github.com/cynkra/dm/blob/master/R/check-cardinalities.R'><code>R/check-cardinalities.R</code></a></small>
    <div class="hidden name"><code>examine_cardinality.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>All <code>check_cardinality_?_?()</code> functions test the following conditions:</p><ol>
<li><p>Is <code>pk_column</code> is a unique key for <code>parent_table</code>?</p></li>
<li><p>Is the set of values in <code>fk_column</code> of <code>child_table</code> a subset of the set of values of <code>pk_column</code>?</p></li>
<li><p>Does the relation between the two tables of the data model meet the cardinality requirements?</p></li>
</ol>

<p><code>examine_cardinality()</code> also checks the first two points and subsequently determines the type of cardinality.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>check_cardinality_0_n</span><span class='op'>(</span><span class='va'>parent_table</span>, <span class='va'>pk_column</span>, <span class='va'>child_table</span>, <span class='va'>fk_column</span><span class='op'>)</span>

<span class='fu'>check_cardinality_1_n</span><span class='op'>(</span><span class='va'>parent_table</span>, <span class='va'>pk_column</span>, <span class='va'>child_table</span>, <span class='va'>fk_column</span><span class='op'>)</span>

<span class='fu'>check_cardinality_1_1</span><span class='op'>(</span><span class='va'>parent_table</span>, <span class='va'>pk_column</span>, <span class='va'>child_table</span>, <span class='va'>fk_column</span><span class='op'>)</span>

<span class='fu'>check_cardinality_0_1</span><span class='op'>(</span><span class='va'>parent_table</span>, <span class='va'>pk_column</span>, <span class='va'>child_table</span>, <span class='va'>fk_column</span><span class='op'>)</span>

<span class='fu'>examine_cardinality</span><span class='op'>(</span><span class='va'>parent_table</span>, <span class='va'>pk_column</span>, <span class='va'>child_table</span>, <span class='va'>fk_column</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>parent_table</th>
      <td><p>Data frame.</p></td>
    </tr>
    <tr>
      <th>pk_column</th>
      <td><p>Column of <code>parent_table</code> that has to be one of its unique keys.</p></td>
    </tr>
    <tr>
      <th>child_table</th>
      <td><p>Data frame.</p></td>
    </tr>
    <tr>
      <th>fk_column</th>
      <td><p>Column of <code>child_table</code> that has to be a foreign key to <code>pk_column</code> in <code>parent_table</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>check_cardinality_?_?()</code>: Functions return <code>parent_table</code>, invisibly, if the check is passed, to support pipes.
Otherwise an error is thrown and the reason for it is explained.</p>
<p>For <code>examine_cardinality()</code>: Returns a character variable specifying the type of relationship between the two columns.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All cardinality-functions accept a <code>parent table</code> (data frame), a column name of this table,
a <code>child table</code>, and a column name of the child table.
The given column of the <code>parent table</code> has to be one of its
unique keys (no duplicates are allowed).
Furthermore, in all cases, the set of values of the child table's column has to be a subset of the set of values of
the parent table's column.</p>
<p>The cardinality specifications <code>0_n</code>, <code>1_n</code>, <code>0_1</code>, <code>1_1</code> refer to the expected relation that the child table has with the parent table.
The numbers <code>0</code>, <code>1</code> and <code>n</code> refer to the number of values in the column of the child table that correspond to each value of the
column of the parent table.
<code>n</code> means "more than one" in this context, with no upper limit.</p>
<p><code>0_n</code> means, that each value of the <code>pk_column</code> has at least <code>0</code> and at most
<code>n</code> corresponding values in the column of the child table (which translates to no further restrictions).</p>
<p><code>1_n</code> means, that each value of the <code>pk_column</code> has at least <code>1</code> and at most
<code>n</code> corresponding values in the column of the child table.
This means that there is a "surjective" mapping from the child table
to the parent table w.r.t. the specified columns, i.e. for each parent table column value there exists at least one equal child table column value.</p>
<p><code>0_1</code> means, that each value of the <code>pk_column</code> has at least <code>0</code> and at most
<code>1</code> corresponding values in the column of the child table.
This means that there is a "injective" mapping from the child table
to the parent table w.r.t. the specified columns, i.e. no parent table column value is addressed multiple times.
But not all of the parent table
column values have to be referred to.</p>
<p><code>1_1</code> means, that each value of the <code>pk_column</code> has exactly
<code>1</code>  corresponding value in the column of the child table.
This means that there is a "bijective" ("injective" AND "surjective") mapping
between the child table and the parent table w.r.t. the specified columns, i.e. the sets of values of the two columns are equal and
there are no duplicates in either of them.</p>
<p>Finally, <code>examine_cardinality()</code> tests for and returns the nature of the relationship (injective, surjective, bijective, or none of these)
between the two given columns. If either <code>pk_column</code> is not a unique key of <code>parent_table</code> or the values of <code>fk_column</code> are
not a subset of the values in <code>pk_column</code>, the requirements for a cardinality test is not fulfilled. No error will be thrown, but
the result will contain the information which prerequisite was violated.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='va'>d1</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>a <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>d2</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>c <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>, <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>d3</span> <span class='op'>&lt;-</span> <span class='fu'>tibble</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>c <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'># This does not pass, `c` is not unique key of d2:</span></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='fu'>check_cardinality_0_n</span><span class='op'>(</span><span class='va'>d2</span>, <span class='va'>c</span>, <span class='va'>d1</span>, <span class='va'>a</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Error : (`c`) not a unique key of `d2`.</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># This passes, multiple values in d2$c are allowed:</span></span>
<span class='r-in'><span class='fu'>check_cardinality_0_n</span><span class='op'>(</span><span class='va'>d1</span>, <span class='va'>a</span>, <span class='va'>d2</span>, <span class='va'>c</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># This does not pass, injectivity is violated:</span></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='fu'>check_cardinality_1_1</span><span class='op'>(</span><span class='va'>d1</span>, <span class='va'>a</span>, <span class='va'>d2</span>, <span class='va'>c</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Error : 1..1 cardinality (bijectivity) is not given: Column `c` in table `d2` contains duplicate values.</span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># This passes:</span></span>
<span class='r-in'><span class='fu'>check_cardinality_0_1</span><span class='op'>(</span><span class='va'>d1</span>, <span class='va'>a</span>, <span class='va'>d3</span>, <span class='va'>c</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># Returns the kind of cardinality</span></span>
<span class='r-in'><span class='fu'>examine_cardinality</span><span class='op'>(</span><span class='va'>d1</span>, <span class='va'>a</span>, <span class='va'>d2</span>, <span class='va'>c</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [1] "surjective mapping (child: 1 to n -&gt; parent: 1)"</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Tobias Schieferdecker, <a href="http://krlmlr.info" class="external-link">Kirill Müller</a>, Darko Bergant, <a href="https://www.energie360.ch/de/" class="external-link"><img src="https://cynkra.github.io/dm/reference/figures/energie-72.png" height="16"></a>, <a href="https://www.cynkra.com" class="external-link"><img src="https://cynkra.github.io/dm/reference/figures/cynkra-72.png" height="16"></a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


