<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Modifying rows for multiple tables — rows-dm • dm</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Modifying rows for multiple tables — rows-dm" />
<meta property="og:description" content="
These functions provide a framework for updating data in existing tables.
Unlike compute(), copy_to() or copy_dm_to(), no new tables are created
on the database.
All operations expect that both existing and new data are presented
in two compatible dm objects on the same data source.
The functions make sure that the tables in the target dm
are processed in topological order so that parent (dimension)
tables receive insertions before child (fact) tables.
These operations, in contrast to all other operations,
may lead to irreversible changes to the underlying database.
Therefore, in-place operation must be requested explicitly with in_place = TRUE.
By default, an informative message is given.
dm_rows_insert() adds new records via rows_insert().
The primary keys must differ from existing records.
This must be ensured by the caller and might be checked by the underlying database.
Use in_place = FALSE and apply dm_examine_constraints() to check beforehand.
dm_rows_update() updates existing records via rows_update().
Primary keys must match for all records to be updated.
dm_rows_patch() updates missing values in existing records
via rows_patch().
Primary keys must match for all records to be patched.
dm_rows_upsert() updates existing records and adds new records,
based on the primary key, via rows_upsert().
dm_rows_delete() removes matching records via rows_delete(),
based on the primary key.
The order in which the tables are processed is reversed.
dm_rows_truncate() removes all records via rows_truncate(),
only for tables in dm.
The order in which the tables are processed is reversed." />
<meta property="og:image" content="https://krlmlr.github.io/dm/logo.png" />


<meta name="robots" content="noindex">



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



<!-- dependencies from examples -->


  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dm</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.1.12.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/dm.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/howto-dm-theory.html">Introduction to relational data models</a>
    </li>
    <li>
      <a href="../articles/howto-dm-df.html">Create a dm object from data frames</a>
    </li>
    <li>
      <a href="../articles/howto-dm-db.html">Create a dm object from a database</a>
    </li>
    <li>
      <a href="../articles/howto-dm-copy.html">Copy data to and from a database</a>
    </li>
    <li>
      <a href="../articles/howto-dm-rows.html">Insert, update or remove rows in a database</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Technical articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tech-dm-join.html">Joining in relational data models</a>
    </li>
    <li>
      <a href="../articles/tech-dm-zoom.html">Zooming and manipulating tables</a>
    </li>
    <li>
      <a href="../articles/tech-dm-filter.html">Filtering in relational data models</a>
    </li>
    <li>
      <a href="../articles/tech-dm-draw.html">Visualizing dm objects</a>
    </li>
    <li>
      <a href="../articles/tech-dm-low-level.html">Model verification - keys, constraints and normalization</a>
    </li>
    <li>
      <a href="../articles/tech-dm-class.html">Class 'dm' and basic operations</a>
    </li>
    <li>
      <a href="../articles/tech-dm-naming.html">Function naming logic</a>
    </li>
    <li>
      <a href="../articles/tech-dm-cdm.html">Migration guide: 'cdm' -&gt; 'dm'</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/krlmlr/dm">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Modifying rows for multiple tables</h1>
    <small class="dont-index">Source: <a href='https://github.com/krlmlr/dm/blob/master/R/rows-dm.R'><code>R/rows-dm.R</code></a></small>
    <div class="hidden name"><code>rows-dm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><a href='https://lifecycle.r-lib.org/articles/stages.html#experimental'><img src='figures/lifecycle-experimental.svg' alt='[Experimental]' /></a></p>
<p>These functions provide a framework for updating data in existing tables.
Unlike <code><a href='https://dplyr.tidyverse.org/reference/compute.html'>compute()</a></code>, <code><a href='https://dplyr.tidyverse.org/reference/copy_to.html'>copy_to()</a></code> or <code><a href='copy_dm_to.html'>copy_dm_to()</a></code>, no new tables are created
on the database.
All operations expect that both existing and new data are presented
in two compatible <a href='dm.html'>dm</a> objects on the same data source.</p>
<p>The functions make sure that the tables in the target dm
are processed in topological order so that parent (dimension)
tables receive insertions before child (fact) tables.</p>
<p>These operations, in contrast to all other operations,
may lead to irreversible changes to the underlying database.
Therefore, in-place operation must be requested explicitly with <code>in_place = TRUE</code>.
By default, an informative message is given.</p>
<p><code>dm_rows_insert()</code> adds new records via <code><a href='https://dplyr.tidyverse.org/reference/rows.html'>rows_insert()</a></code>.
The primary keys must differ from existing records.
This must be ensured by the caller and might be checked by the underlying database.
Use <code>in_place = FALSE</code> and apply <code><a href='dm_examine_constraints.html'>dm_examine_constraints()</a></code> to check beforehand.</p>
<p><code>dm_rows_update()</code> updates existing records via <code><a href='https://dplyr.tidyverse.org/reference/rows.html'>rows_update()</a></code>.
Primary keys must match for all records to be updated.</p>
<p><code>dm_rows_patch()</code> updates missing values in existing records
via <code><a href='https://dplyr.tidyverse.org/reference/rows.html'>rows_patch()</a></code>.
Primary keys must match for all records to be patched.</p>
<p><code>dm_rows_upsert()</code> updates existing records and adds new records,
based on the primary key, via <code><a href='https://dplyr.tidyverse.org/reference/rows.html'>rows_upsert()</a></code>.</p>
<p><code>dm_rows_delete()</code> removes matching records via <code><a href='https://dplyr.tidyverse.org/reference/rows.html'>rows_delete()</a></code>,
based on the primary key.
The order in which the tables are processed is reversed.</p>
<p><code>dm_rows_truncate()</code> removes all records via <code><a href='rows_truncate.html'>rows_truncate()</a></code>,
only for tables in <code>dm</code>.
The order in which the tables are processed is reversed.</p>
    </div>

    <pre class="usage"><span class='fu'>dm_rows_insert</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>...</span>, in_place <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>dm_rows_update</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>...</span>, in_place <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>dm_rows_patch</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>...</span>, in_place <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>dm_rows_upsert</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>...</span>, in_place <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>dm_rows_delete</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>...</span>, in_place <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>dm_rows_truncate</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, <span class='va'>...</span>, in_place <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Target <code>dm</code> object.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p><code>dm</code> object with new data.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Must be empty.</p></td>
    </tr>
    <tr>
      <th>in_place</th>
      <td><p>Should <code>x</code> be modified in place? This argument is only
relevant for mutable backends (e.g. databases, data.tables).</p>
<p>When <code>TRUE</code>, a modified version of <code>x</code> is returned invisibly;
when <code>FALSE</code>, a new object representing the resulting changes is returned.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dm object of the same <code><a href='dm_ptype.html'>dm_ptype()</a></code> as <code>x</code>.
If <code>in_place = TRUE</code>, the underlying data is updated as a side effect,
and <code>x</code> is returned, invisibly.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Establish database connection:</span>
<span class='va'>sqlite</span> <span class='op'>&lt;-</span> <span class='fu'>DBI</span><span class='fu'>::</span><span class='fu'><a href='https://dbi.r-dbi.org/reference/dbConnect.html'>dbConnect</a></span><span class='op'>(</span><span class='fu'>RSQLite</span><span class='fu'>::</span><span class='fu'><a href='https://rsqlite.r-dbi.org/reference/SQLite.html'>SQLite</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Entire dataset with all dimension tables populated</span>
<span class='co'># with flights and weather data truncated:</span>
<span class='va'>flights_init</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='dm_nycflights13.html'>dm_nycflights13</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_zoom_to</a></span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_update_zoomed</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_zoom_to</a></span><span class='op'>(</span><span class='va'>weather</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_update_zoomed</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># Target database:</span>
<span class='va'>flights_sqlite</span> <span class='op'>&lt;-</span> <span class='fu'><a href='copy_dm_to.html'>copy_dm_to</a></span><span class='op'>(</span><span class='va'>sqlite</span>, <span class='va'>flights_init</span>, temporary <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='dm_nrow.html'>dm_nrow</a></span><span class='op'>(</span><span class='va'>flights_sqlite</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; airlines airports  flights   planes  weather 
#&gt;       16     1458        0     3322        0 </div><div class='input'>
<span class='co'># First update:</span>
<span class='va'>flights_jan</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='dm_nycflights13.html'>dm_nycflights13</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_select_tbl.html'>dm_select_tbl</a></span><span class='op'>(</span><span class='va'>flights</span>, <span class='va'>weather</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_zoom_to</a></span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>month</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_update_zoomed</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_zoom_to</a></span><span class='op'>(</span><span class='va'>weather</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>month</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_update_zoomed</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='dm_nrow.html'>dm_nrow</a></span><span class='op'>(</span><span class='va'>flights_jan</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; flights weather 
#&gt;     932      72 </div><div class='input'>
<span class='co'># Copy to temporary tables on the target database:</span>
<span class='va'>flights_jan_sqlite</span> <span class='op'>&lt;-</span> <span class='fu'><a href='copy_dm_to.html'>copy_dm_to</a></span><span class='op'>(</span><span class='va'>sqlite</span>, <span class='va'>flights_jan</span><span class='op'>)</span>

<span class='co'># Dry run by default:</span>
<span class='fu'>dm_rows_insert</span><span class='op'>(</span><span class='va'>flights_sqlite</span>, <span class='va'>flights_jan_sqlite</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Not persisting, use `in_place = FALSE` to turn off this message.</span></div><div class='output co'>#&gt; <span style='color: #00BB00;'>──</span><span> </span><span style='color: #00BB00;'>Table source</span><span> </span><span style='color: #00BB00;'>────────────────────────────────────────────────────────────────</span><span>
#&gt; src:  sqlite 3.35.5 []
#&gt; </span><span style='color: #FFAFFF;'>──</span><span> </span><span style='color: #FFAFFF;'>Metadata</span><span> </span><span style='color: #FFAFFF;'>────────────────────────────────────────────────────────────────────</span><span>
#&gt; Tables: `airlines`, `airports`, `flights`, `planes`, `weather`
#&gt; Columns: 53
#&gt; Primary keys: 3
#&gt; Foreign keys: 3</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='dm_nrow.html'>dm_nrow</a></span><span class='op'>(</span><span class='va'>flights_sqlite</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; airlines airports  flights   planes  weather 
#&gt;       16     1458        0     3322        0 </div><div class='input'>
<span class='co'># Explicitly request persistence:</span>
<span class='fu'>dm_rows_insert</span><span class='op'>(</span><span class='va'>flights_sqlite</span>, <span class='va'>flights_jan_sqlite</span>, in_place <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='dm_nrow.html'>dm_nrow</a></span><span class='op'>(</span><span class='va'>flights_sqlite</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; airlines airports  flights   planes  weather 
#&gt;       16     1458      932     3322       72 </div><div class='input'>
<span class='co'># Second update:</span>
<span class='va'>flights_feb</span> <span class='op'>&lt;-</span>
  <span class='fu'><a href='dm_nycflights13.html'>dm_nycflights13</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_select_tbl.html'>dm_select_tbl</a></span><span class='op'>(</span><span class='va'>flights</span>, <span class='va'>weather</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_zoom_to</a></span><span class='op'>(</span><span class='va'>flights</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>month</span> <span class='op'>==</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_update_zoomed</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_zoom_to</a></span><span class='op'>(</span><span class='va'>weather</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>month</span> <span class='op'>==</span> <span class='fl'>2</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_zoom_to.html'>dm_update_zoomed</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># Copy to temporary tables on the target database:</span>
<span class='va'>flights_feb_sqlite</span> <span class='op'>&lt;-</span> <span class='fu'><a href='copy_dm_to.html'>copy_dm_to</a></span><span class='op'>(</span><span class='va'>sqlite</span>, <span class='va'>flights_feb</span><span class='op'>)</span>

<span class='co'># Explicit dry run:</span>
<span class='va'>flights_new</span> <span class='op'>&lt;-</span> <span class='fu'>dm_rows_insert</span><span class='op'>(</span>
  <span class='va'>flights_sqlite</span>,
  <span class='va'>flights_feb_sqlite</span>,
  in_place <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='dm_nrow.html'>dm_nrow</a></span><span class='op'>(</span><span class='va'>flights_new</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; airlines airports  flights   planes  weather 
#&gt;       16     1458     1761     3322      144 </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='dm_nrow.html'>dm_nrow</a></span><span class='op'>(</span><span class='va'>flights_sqlite</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; airlines airports  flights   planes  weather 
#&gt;       16     1458      932     3322       72 </div><div class='input'>
<span class='co'># Check for consistency before applying:</span>
<span class='va'>flights_new</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='dm_examine_constraints.html'>dm_examine_constraints</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'></span><span style='color: #BBBB00;'>!</span><span> Unsatisfied constraints:</span></div><div class='output co'>#&gt; </span><span style='color: #BB0000;'>●</span><span> Table `flights`: foreign key tailnum into table `planes`: 273 entries (15.5%) of `flights$tailnum` not in `planes$tailnum`: N725MQ (6), N537MQ (5), N722MQ (5), N730MQ (5), N736MQ (5), …</div><div class='input'>
<span class='co'># Apply:</span>
<span class='fu'>dm_rows_insert</span><span class='op'>(</span><span class='va'>flights_sqlite</span>, <span class='va'>flights_feb_sqlite</span>, in_place <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='dm_nrow.html'>dm_nrow</a></span><span class='op'>(</span><span class='va'>flights_sqlite</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; airlines airports  flights   planes  weather 
#&gt;       16     1458     1761     3322      144 </div><div class='input'>
<span class='fu'>DBI</span><span class='fu'>::</span><span class='fu'><a href='https://dbi.r-dbi.org/reference/dbDisconnect.html'>dbDisconnect</a></span><span class='op'>(</span><span class='va'>sqlite</span><span class='op'>)</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Tobias Schieferdecker, <a href="http://krlmlr.info" class="external-link">Kirill Müller</a>, Darko Bergant, <a href="https://www.energie360.ch/de/" class="external-link"><img src="https://krlmlr.github.io/dm/reference/figures/energie-72.png" height="16"></a>, <a href="https://www.cynkra.com" class="external-link"><img src="https://krlmlr.github.io/dm/reference/figures/cynkra-72.png" height="16"></a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


