<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dm">
<title>Migration guide: 'cdm' -&gt; 'dm' • dm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Migration guide: 'cdm' -&gt; 'dm'">
<meta property="og:description" content="dm">
<meta property="og:image" content="https://cynkra.github.io/dm/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dm</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/dm.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/howto-dm-theory.html">Introduction to relational data models</a>
    <a class="dropdown-item" href="../articles/howto-dm-df.html">Create a dm object from data frames</a>
    <a class="dropdown-item" href="../articles/howto-dm-db.html">Create a dm object from a database</a>
    <a class="dropdown-item" href="../articles/howto-dm-copy.html">Copy data to and from a database</a>
    <a class="dropdown-item" href="../articles/howto-dm-rows.html">Insert, update, or remove rows in a database</a>
  </div>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-technical-articles">Technical articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-technical-articles">
    <a class="dropdown-item" href="../articles/tech-dm-join.html">Joining in relational data models</a>
    <a class="dropdown-item" href="../articles/tech-dm-zoom.html">Zooming and manipulating tables</a>
    <a class="dropdown-item" href="../articles/tech-dm-filter.html">Filtering in relational data models</a>
    <a class="dropdown-item" href="../articles/tech-dm-draw.html">Visualizing dm objects</a>
    <a class="dropdown-item" href="../articles/tech-dm-low-level.html">Model verification - keys, constraints and normalization</a>
    <a class="dropdown-item" href="../articles/tech-dm-class.html">Class 'dm' and basic operations</a>
    <a class="dropdown-item" href="../articles/tech-dm-naming.html">Function naming logic</a>
    <a class="dropdown-item" href="../articles/tech-dm-cdm.html">Migration guide: 'cdm' -&gt; 'dm'</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cynkra/dm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Migration guide: 'cdm' -&gt; 'dm'</h1>
            
            <h4 data-toc-skip class="date">2022-07-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cynkra/dm/blob/HEAD/vignettes/tech-dm-cdm.Rmd" class="external-link"><code>vignettes/tech-dm-cdm.Rmd</code></a></small>
      <div class="d-none name"><code>tech-dm-cdm.Rmd</code></div>
    </div>

    
    
<p>This vignette describes which changes are necessary to adapt your code when updating the {dm} package version from a version <code>0.0.5</code> or lower to <code>0.0.6</code> or higher.</p>
<div class="section level2">
<h2 id="changes-required-when-updating-from-version-0-0-5-to-0-0-6">Changes required when updating from version <code>0.0.5</code> to <code>0.0.6</code><a class="anchor" aria-label="anchor" href="#changes-required-when-updating-from-version-0-0-5-to-0-0-6"></a>
</h2>
<div class="section level3">
<h3 id="replace-cdm-with-dm">Replace <code>cdm</code> with <code>dm</code><a class="anchor" aria-label="anchor" href="#replace-cdm-with-dm"></a>
</h3>
<p>During this update the prevalent prefix <code>cdm</code> was discarded in favor of <code>dm</code>. The old prefix would still do its job, but a warning message would be issued each time a function beginning with <code>cdm</code> was being used, informing that the function is soft-deprecated and suggesting the use of its newer version.</p>
<p>If you have a script which is based on an older {dm} version, it should still work with the newer version, albeit complaining each time an outdated function is being used. This can be repaired by:</p>
<ol style="list-style-type: decimal">
<li>either going through the script step by step, testing the output of each line of code and use the new function names provided in the generated warnings to update the function calls.</li>
<li>or just by replacing all occurrences of <code>cdm</code> by <code>dm</code> in this script. This can e.g. be done in RStudio using “Find” or in the terminal using <code>sed -e 's/cdm/dm/g' path-to-file</code> on Windows or <code>sed -i '' -e 's/cdm/dm/g' path-to-file</code> on a Mac. If the script errors after this step, you will need to check where exactly the error happens and manually repair the damage.</li>
</ol>
</div>
<div class="section level3">
<h3 id="be-careful-with-methods-for-dm-tbl">Be careful with methods for <code>dm</code>: <code>tbl</code>, <code>[[</code>, <code>$</code><a class="anchor" aria-label="anchor" href="#be-careful-with-methods-for-dm-tbl"></a>
</h3>
<p>Furthermore, you need to pay attention if you used one of <code><a href="../reference/dplyr_src.html">tbl.dm()</a></code>, <code>[[.dm()</code>, <code>$.dm()</code>. During the same update the implementation for those methods changed as well, and here you don’t get the convenient warning messages. The change was, that before the update, the mentioned methods would return the table after “filtering” it to just contain the rows with values that relate via foreign key relations to other tables that were filtered earlier. After the update just the table as is would be returned. If you want to retain the former behavior, you need to replace each of the methods with the function <code><a href="../reference/dm_filter.html">dm_apply_filters_to_tbl()</a></code>, which was made available with the update.</p>
<p>The methods are of course not to be avoided in general, if no filters are set anyway the result will not change after the update.</p>
<p>Here a short example for the different cases:</p>
<p>Formerly you would access the “filtered” tables using the following syntax:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cynkra.github.io/dm/">dm</a></span><span class="op">)</span></span>
<span><span class="va">flights_dm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dm_nycflights13.html">dm_nycflights13</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">flights_dm</span>, <span class="st">"airports"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: `tbl.dm()` was deprecated in dm 0.2.0.</span></span>
<span><span class="co">#&gt; Use `dm[[table_name]]` instead to access a specific table.</span></span></code></pre></div>
<pre class="fansi fansi-output"><code><span><span class="co">#&gt; # A tibble: 86 × 8</span></span>
<span><span class="co">#&gt;    faa   name                            lat    lon   alt    tz dst   tzone</span></span>
<span><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;                         &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt;  1 ALB   Albany Intl                    42.7  -73.8   285    -5 A     Amer…</span></span>
<span><span class="co">#&gt;  2 ATL   Hartsfield Jackson Atlanta I…  33.6  -84.4  1026    -5 A     Amer…</span></span>
<span><span class="co">#&gt;  3 AUS   Austin Bergstrom Intl          30.2  -97.7   542    -6 A     Amer…</span></span>
<span><span class="co">#&gt;  4 BDL   Bradley Intl                   41.9  -72.7   173    -5 A     Amer…</span></span>
<span><span class="co">#&gt;  5 BHM   Birmingham Intl                33.6  -86.8   644    -6 A     Amer…</span></span>
<span><span class="co">#&gt;  6 BNA   Nashville Intl                 36.1  -86.7   599    -6 A     Amer…</span></span>
<span><span class="co">#&gt;  7 BOS   General Edward Lawrence Loga…  42.4  -71.0    19    -5 A     Amer…</span></span>
<span><span class="co">#&gt;  8 BTV   Burlington Intl                44.5  -73.2   335    -5 A     Amer…</span></span>
<span><span class="co">#&gt;  9 BUF   Buffalo Niagara Intl           42.9  -78.7   724    -5 A     Amer…</span></span>
<span><span class="co">#&gt; 10 BUR   Bob Hope                       34.2 -118.    778    -8 A     Amer…</span></span>
<span><span class="co">#&gt; # … with 76 more rows</span></span></code></pre>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flights_dm</span><span class="op">$</span><span class="va">planes</span></span></code></pre></div>
<pre class="fansi fansi-output"><code><span><span class="co">#&gt; # A tibble: 945 × 9</span></span>
<span><span class="co">#&gt;    tailnum  year type         manufacturer model engines seats speed engine</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; </span></span>
<span><span class="co">#&gt;  1 N10156   2004 Fixed wing … EMBRAER      EMB-…       2    55    NA Turbo…</span></span>
<span><span class="co">#&gt;  2 N104UW   1999 Fixed wing … AIRBUS INDU… A320…       2   182    NA Turbo…</span></span>
<span><span class="co">#&gt;  3 N10575   2002 Fixed wing … EMBRAER      EMB-…       2    55    NA Turbo…</span></span>
<span><span class="co">#&gt;  4 N105UW   1999 Fixed wing … AIRBUS INDU… A320…       2   182    NA Turbo…</span></span>
<span><span class="co">#&gt;  5 N110UW   1999 Fixed wing … AIRBUS INDU… A320…       2   182    NA Turbo…</span></span>
<span><span class="co">#&gt;  6 N11106   2002 Fixed wing … EMBRAER      EMB-…       2    55    NA Turbo…</span></span>
<span><span class="co">#&gt;  7 N11107   2002 Fixed wing … EMBRAER      EMB-…       2    55    NA Turbo…</span></span>
<span><span class="co">#&gt;  8 N11109   2002 Fixed wing … EMBRAER      EMB-…       2    55    NA Turbo…</span></span>
<span><span class="co">#&gt;  9 N11121   2003 Fixed wing … EMBRAER      EMB-…       2    55    NA Turbo…</span></span>
<span><span class="co">#&gt; 10 N11137   2003 Fixed wing … EMBRAER      EMB-…       2    55    NA Turbo…</span></span>
<span><span class="co">#&gt; # … with 935 more rows</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flights_dm</span><span class="op">[[</span><span class="st">"weather"</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre class="fansi fansi-output"><code><span><span class="co">#&gt; # A tibble: 144 × 15</span></span>
<span><span class="co">#&gt;    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 EWR     2013     1    10     0  41    32    70.1      230       8.06</span></span>
<span><span class="co">#&gt;  2 EWR     2013     1    10     1  39.0  30.0  69.9      210       9.21</span></span>
<span><span class="co">#&gt;  3 EWR     2013     1    10     2  39.0  28.9  66.8      230       6.90</span></span>
<span><span class="co">#&gt;  4 EWR     2013     1    10     3  39.9  27.0  59.5      270       5.75</span></span>
<span><span class="co">#&gt;  5 EWR     2013     1    10     4  41    26.1  55.0      320       6.90</span></span>
<span><span class="co">#&gt;  6 EWR     2013     1    10     5  41    26.1  55.0      300      12.7 </span></span>
<span><span class="co">#&gt;  7 EWR     2013     1    10     6  39.9  25.0  54.8      280       6.90</span></span>
<span><span class="co">#&gt;  8 EWR     2013     1    10     7  41    25.0  52.6      330       6.90</span></span>
<span><span class="co">#&gt;  9 EWR     2013     1    10     8  43.0  25.0  48.7      330       8.06</span></span>
<span><span class="co">#&gt; 10 EWR     2013     1    10     9  45.0  23    41.6      320      17.3 </span></span>
<span><span class="co">#&gt; # … with 134 more rows, and 5 more variables: wind_gust &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;</span></span></code></pre>
<p>After the update the same result is achieved by this type of function call:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dm_filter.html">dm_apply_filters_to_tbl</a></span><span class="op">(</span><span class="va">flights_dm</span>, <span class="va">airlines</span><span class="op">)</span></span></code></pre></div>
<pre class="fansi fansi-output"><code><span><span class="co">#&gt; # A tibble: 15 × 2</span></span>
<span><span class="co">#&gt;    carrier name                       </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;                      </span></span>
<span><span class="co">#&gt;  1 9E      Endeavor Air Inc.          </span></span>
<span><span class="co">#&gt;  2 AA      American Airlines Inc.     </span></span>
<span><span class="co">#&gt;  3 AS      Alaska Airlines Inc.       </span></span>
<span><span class="co">#&gt;  4 B6      JetBlue Airways            </span></span>
<span><span class="co">#&gt;  5 DL      Delta Air Lines Inc.       </span></span>
<span><span class="co">#&gt;  6 EV      ExpressJet Airlines Inc.   </span></span>
<span><span class="co">#&gt;  7 F9      Frontier Airlines Inc.     </span></span>
<span><span class="co">#&gt;  8 FL      AirTran Airways Corporation</span></span>
<span><span class="co">#&gt;  9 HA      Hawaiian Airlines Inc.     </span></span>
<span><span class="co">#&gt; 10 MQ      Envoy Air                  </span></span>
<span><span class="co">#&gt; 11 UA      United Air Lines Inc.      </span></span>
<span><span class="co">#&gt; 12 US      US Airways Inc.            </span></span>
<span><span class="co">#&gt; 13 VX      Virgin America             </span></span>
<span><span class="co">#&gt; 14 WN      Southwest Airlines Co.     </span></span>
<span><span class="co">#&gt; 15 YV      Mesa Airlines Inc.</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Tobias Schieferdecker, <a href="http://krlmlr.info" class="external-link">Kirill Müller</a>, Darko Bergant, <a href="https://www.energie360.ch/de/" class="external-link"><img src="https://cynkra.github.io/dm/reference/figures/energie-72.png" height="16"></a>, <a href="https://www.cynkra.com" class="external-link"><img src="https://cynkra.github.io/dm/reference/figures/cynkra-72.png" height="16"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
